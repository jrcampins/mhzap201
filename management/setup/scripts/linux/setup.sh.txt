------------------------------------------------------------------------------------------------------------------------------------------------------
Instalación de mhzap201 1.0 en Unix
------------------------------------------------------------------------------------------------------------------------------------------------------

01. Crear el directorio mhzap201, preferiblemente en /opt

    cd /opt
    mkdir mhzap201


02. Establecer las variables de entorno MHZAP201_HOME, GLASSFISH_HOME y POSTGRESQL_HOME e incluirlas en /etc/profile.
    Por ejemplo:

    export MHZAP201_HOME=/opt/mhzap201
    export GLASSFISH_HOME=/opt/glassfish
    export POSTGRESQL_HOME=/opt/postgresql

    Si no se establece la variable de entorno MHZAP201_HOME, ejecutar el script home2scripts.sh en el siguiente paso.


03. Descomprimir el archivo zip VnnRaammdd en $MHZAP201_HOME. Esta acción crea el
    directorio $MHZAP201_HOME/VnnRaammdd

    unzip VnnRaammdd -d $MHZAP201_HOME
    chmod -R 0777 $MHZAP201_HOME/VnnRaammdd

    Si en el paso anterior no se establece la variable de entorno MHZAP201_HOME, ejecutar el script VnnRaammdd/home2scripts.sh


04. Ejecutar el script $MHZAP201_HOME/VnnRaammdd/scripts2home.sh. Este script copia a $MHZAP201_HOME los siguientes archivos:

    variables-home.sh
    variables-dbdc.sh
    variables-j2ee.sh
    asadmin.password


05. Ajustar las variables de entorno en $MHZAP201_HOME/variables-dbdc.sh.
    Los valores predeterminados coinciden con los valores predeterminados de GlassFish y PostgreSQL y son los siguientes:

    dbhost="localhost"
    dbport="5432"
    dbuser="postgres"
    dbpass="postgres"
    dbpassfile="$MHZAP201_HOME/pgadmin.password"
    dbname="MHZDB201"
    dbcurl="jdbc:postgresql://${dbhost}:${dbport}/${dbname}"
    driver="org.postgresql.Driver"

    ashost="localhost"
    asport="4848"
    asuser="admin"
    aspass="admin"
    aspassfile="$MHZAP201_HOME/asadmin.password"
    ascst1="--user ${asuser} --passwordfile ${aspassfile}"
    ascst2="--host ${ashost} --port ${asport} ${ascst1}"
    domain="domain1"


06. Ajustar las contraseÃ±as

    06.01.  Acceso a glassfish en $MHZAP201_HOME/asadmin.password
            Los valores predeterminados coinciden con los valores predeterminados de GlassFish y son los siguientes:

            AS_ADMIN_MASTERPASSWORD=changeit
            AS_ADMIN_PASSWORD=admin
            AS_ADMIN_USERPASSWORD=admin


07. Configurar GlassFish (seguir los pasos indicados en el archivo "$MHZAP201_HOME/VnnRaammdd/configuracion-glassfish-unix.txt")


08. Ejecutar el script de instalación

    08.01.  Para instalar por primera vez, ejecutar el script de instalación $MHZAP201_HOME/VnnRaammdd/install.sh.
            Este script lleva a cabo las siguientes acciones:

            08.01.01. chmod: otorga los permisos necesarios
            08.01.02. dos2unix: convierte los archivos de texto de formato DOS a formato UNIX
            08.01.03. createdb: crea la base de datos
            08.01.04. restore: restaura la base de datos a partir de un archivo respaldo
            08.01.05. rebuild: reconstruye las tablas "plus" correspondientes a cada tabla "arbol"
            08.01.06. vacuumdb: comprime la base de datos
            08.01.07. domain-start: inicia la ejecucion del servidor de aplicaciones
            08.01.08. server-config: establece parametros de configuracion del servidor de aplicaciones
            08.01.09. create-jdbc: crea el dominio de seguridad, los conjuntos de conexiones y demas recursos JDBC del servidor de aplicaciones
            08.01.10. create-jms: crea las fabricas de conexiones, conjuntos de conexiones y demas recursos JMS del servidor de aplicaciones
            08.01.11. deploy: implementa la aplicacion de empresa en el servidor de aplicaciones
            08.01.12. copy-imagenes: copia las imagenes usadas por los informes a la carpeta de configuracion del servidor de aplicaciones
            08.01.13. copy-fonts: copia las fuentes usadas por los informes a la carpeta de configuracion del servidor de aplicaciones

    08.02.  Para reemplazar una versión ya instalada, ejecutar el script de instalación $MHZAP201_HOME/VnnRaammdd/upgrade.sh.
            Este script lleva a cabo las siguientes acciones:

            08.02.01. chmod: otorga los permisos necesarios
            08.02.02. dos2unix: convierte los archivos de texto de formato DOS a formato UNIX
            08.02.03. domain-start: inicia la ejecucion del servidor de aplicaciones
            08.02.04. undeploy: anula la implementacion de la aplicacion de empresa del servidor de aplicaciones
            08.02.05. delete-jms: elimina las fabricas de conexiones, conjuntos de conexiones y demas recursos JMS del servidor de aplicaciones
            08.02.06. delete-jdbc: elimina el dominio de seguridad, los conjuntos de conexiones y demas recursos JDBC del servidor de aplicaciones
            08.02.07. domain-stop: detiene la ejecucion del servidor de aplicaciones
            08.02.08. dump: crea un archivo respaldo de la base de datos
            08.02.09. upgradedb: actualiza la base de datos
            08.02.10. rebuild: reconstruye las tablas "plus" correspondientes a cada tabla "arbol"
            08.02.11. vacuumdb: comprime la base de datos
            08.02.12. domain-start: inicia la ejecucion del servidor de aplicaciones
            08.02.13. server-config: establece parametros de configuracion del servidor de aplicaciones
            08.02.14. create-jdbc: crea el dominio de seguridad, los conjuntos de conexiones y demas recursos JDBC del servidor de aplicaciones
            08.02.15. create-jms: crea las fabricas de conexiones, conjuntos de conexiones y demas recursos JMS del servidor de aplicaciones
            08.02.16. deploy: implementa la aplicacion de empresa en el servidor de aplicaciones
            08.02.17. copy-imagenes: copia las imagenes usadas por los informes a la carpeta de configuracion del servidor de aplicaciones
            08.01.18. copy-fonts: copia las fuentes usadas por los informes a la carpeta de configuracion del servidor de aplicaciones


------------------------------------------------------------------------------------------------------------------------------------------------------
Operación de mhzap201 1.0 en Unix
------------------------------------------------------------------------------------------------------------------------------------------------------

Una vez instalado el producto, el servidor de aplicaciones queda listo para permitir su operación normal. Utilice su navegador web para abrir la pÃ¡gina
http://localhost:8080/mhzap201-web/ (sustituya localhost:8080 por el IP del servidor donde instaló GlassFish y el puerto HTTP que le asignó al instalarlo).
La sesión de trabajo comienza por la pÃ¡gina de autenticación del usuario. Al instalar se define el usuario "admin" y su contraseÃ±a es "sesamo".

De ser necesario detener el servidor de aplicaciones, Ã©ste deberÃ¡ ser reiniciado utilizando el script domain-start.sh que se encuentra el en directorio
$MHZAP201_HOME/VnnRaammdd/resources/scripts/linux/glassfish. Este script establece las variables de entorno requeridas para la operación del producto.


------------------------------------------------------------------------------------------------------------------------------------------------------
Desinstalación de mhzap201 1.0 en Unix
------------------------------------------------------------------------------------------------------------------------------------------------------

Para desintalar el producto, ejecute el script $MHZAP201_HOME/VnnRaammdd/uninstall.sh.


